$(document).ready(function(){var bannerHero=$(".banner-hero");if(bannerHero.length){var indicator=bannerHero.find(".slider-indicator");if(indicator){$(".banner-hero .slider-hero").slick({arrows:false,dots:false,appendDots:indicator.find(".indicator"),appendArrows:indicator.find(".indicator"),prevArrow:`<button type='button' class='slick-prev pull-left'><svg  xmlns="http://www.w3.org/2000/svg"  width="20"  height="20"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-left"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 6l-6 6l6 6" /></svg></button>`,nextArrow:`<button type='button' class='slick-next pull-right'><svg  xmlns="http://www.w3.org/2000/svg"  width="20"  height="20"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-right"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 6l6 6l-6 6" /></svg></button>`,adaptiveHeight:false,autoplay:false,});let intervalID;var carouselIndicatorSpans=$(".banner-hero .slick-dots li button span");fillCarouselHeroIndicator(0);$(".banner-hero .slider-hero").on("afterChange",function(event,slick,currentSlide,nextSlide){fillCarouselHeroIndicator(currentSlide);});$(".banner-hero .slick-next").on("click",function(){$(".banner-hero .slider-hero").slick("slickNext");});$(".banner-hero .slick-prev").on("click",function(){$(".banner-hero .slider-hero").slick("slickPrev");});$(".banner-hero .slick-dots li").click(function(){$(".banner-hero .slider-hero").slick("slickGoTo",$(this).index());});function fillCarouselHeroIndicator(index){let i=0;if(carouselIndicatorSpans){$(carouselIndicatorSpans).each(function(){$(this).css("width","0");});if(index>0){for(var z=0;z<index;z++){$(carouselIndicatorSpans).eq(z).css("width","100%");}}
clearInterval(intervalID);$(".banner-hero .slider-hero").slick("slickPause");intervalID=setInterval(function(){i++;$(carouselIndicatorSpans).eq(index).css("width",i+"%");if(i>=100){$(".banner-hero .slider-hero").slick("slickNext");}},30);}}}}});;;
(function(){function validateSupported(element){var selected=element.options[element.selectedIndex];if(!element.value)return true;return selected&&selected.getAttribute("data-supported")==="true";}
function showOrHideError(select,isValid,unsupportedError){let selectId=select.id;var errorSpan=document.querySelector('span[data-valmsg-for="'+selectId+'"]');if(!isValid){select.classList.remove("valid");select.classList.add("input-validation-error");select.setAttribute("aria-invalid","true");if(errorSpan){errorSpan.classList.remove("field-validation-valid");errorSpan.classList.add("field-validation-error");errorSpan.innerHTML='<span>'+unsupportedError+"</span>";}}else{select.classList.remove("input-validation-error");select.classList.add("valid");select.setAttribute("aria-invalid","false");if(errorSpan){errorSpan.innerHTML="";errorSpan.classList.add("field-validation-valid");errorSpan.classList.remove("field-validation-error");}}}
function attachValidation(select){if(!select.getAttribute("val-supported")||!select.getAttribute("data-val-supported"))return;["change"].forEach(function(eventName){select.addEventListener(eventName,function(){var isValid=validateSupported(select);select.setCustomValidity(isValid?"":select.getAttribute("data-val-supported")||"Unsupported option selected.");var selected=select.options[select.selectedIndex];let caption=selected.innerText||"";var unsupportedError=formatString(select.getAttribute("data-val-supported"),caption);if(!isValid){select.selectedIndex=0;}
setTimeout(function(){showOrHideError(select,isValid,unsupportedError);},0);});});}
document.addEventListener("DOMContentLoaded",function(){var selects=document.querySelectorAll("select[data-val-supported]");selects.forEach(attachValidation);});})();;;
$(document).ready(async function(){var unQualificationMessage="Bạn không thỏa điều kiện nhận khoản vay từ FE CREDIT";var existMessage="Thông tin đăng ký của bạn đã được chúng tôi ghi nhận trước đó, xin vui lòng thử lại sau";var step="";var productLeastSelect="";var contentIdConstant="contentId";var productType=window.productType||"";var isProduct=window.isProduct||"";var marketingPixel=window.marketingPixel||"";var isDisable=window.isDisable||"";var contentId=window.contentId||"";const RegisterLeadResEnum={Success:0,Rejected:1,Approved:2,ExistedNID:3,ExistedPhone:4,Error:5,RateLimitedIp:6,InactiveAddress:7,InvalidNID:8,ProcessLead:9,Invalid:10,};const StepEnum={Transition:"Transition",Step_2:"Step form 2/2",Step_3:"Step_3",};const successClass="success";const skipSuccessClass="skip-success";const errorClass="error";const invalidRecaptchaClass="invalid-recaptcha";const rateClass="rate-limited-ip";const approvedClass="approved";const rejectedClass="rejected";const collectionClass="collection";const processClass="process";const productTypeDefault="home";const recaptchav3Class="umbraco-forms-recaptcha-v3-config";const formName="Lead Acquisition Form";const productClass="lastselected_product".toLowerCase();const provinceClass="lastselected_province".toLowerCase();const channelClass="lastselected_consultingchannel".toLowerCase();const districtClass="lastselected_district".toLowerCase();const nidClass="NID".toLowerCase();const phoneClass="Phone".toLowerCase();const brandTwlClass="Goods_brand_twl".toLowerCase();const mktFormConstant="mkt_form".toLowerCase();const eligible="eligible".toLowerCase();const timeOutMinutes=5;var inputForm=$(`input[name="FormName"][value="${formName}"]`);var form=inputForm.closest("form");var divForm=form.closest("div");var divFormId=divForm.attr("id");const popupListId="lead-gen-popup-message-id";const leadGenFormId="lead-gen-form-id";var hasProductType=false;let nidField=document.querySelector(`.umbraco-forms-field.${nidClass} input`);var recordId=$(`#${divFormId} form input[name="RecordId"]`).val();$("a[rel^='nextToAddition']").addClass(`btn_${productType ? productType : productTypeDefault}_step1_continue`);$("a[rel^='back']").addClass(`btn_${productType ? productType : productTypeDefault}_step1_skip`);var recordElement=$(`#${divFormId} form input[name="RecordId"]`);var queryString=window.location.search;var reloading=false;var isSubmitting=false;function clearValidationErrorsLead(){$(`#${divFormId} form .recaptcha-error`).remove();}
let minutesTimeOutInt=parseInt(timeOutMinutes)||0;function setTimeoutForm(){return setTimeout(()=>{if(typeof window.showSpinner==="function"){window.showSpinner();}
let formData=$(`#${divFormId} form`);$.aGet(`/Umbraco/Api/Register/ClearRecordIdSession?${contentIdConstant}=${contentId}`,function(){},"json");formData.trigger("reset");recordElement.val("");recordId="";initProduct();hideOrShowTransition();toggleFieldsetParts(`#${divFormId} form .umbraco-forms-page`);if(typeof window.hideSpinner==="function"){window.hideSpinner();}},1000*60*minutesTimeOutInt);}
let timeoutLeadGen;let debounceTimeout;const DEBOUNCE_DELAY=5000;if(minutesTimeOutInt||minutesTimeOutInt>0){timeoutLeadGen=setTimeoutForm();$(`#${divFormId} form`).on("click change keyup",function(event){if(timeoutLeadGen){clearTimeout(timeoutLeadGen);}
timeoutLeadGen=setTimeoutForm();clearTimeout(debounceTimeout);debounceTimeout=setTimeout(()=>{$.aGet(`/Umbraco/Api/Register/ExtendSession?${contentIdConstant}=${contentId}`,function(){},"json");},DEBOUNCE_DELAY);});}
$(window).on("load",function(){$(".lead-gen-form .field-validation-valid").css("color","var(--Primitives-Red-5, #ED2628) !important");});showDistrict("");$(`#${divFormId} form .${productClass} input[type="radio"]`).click(async function(e){const selectedValue=$(this).val();if(hasProductType&&selectedValue!==productType){e.preventDefault();return;}
if($(this).is(":checked")){if(typeof window.showSpinner==="function"){window.showSpinner();}
if($(this).val().toString().toLowerCase()==="cdl"||$(this).val().toString().toLowerCase()==="twl")
$(`#${divFormId} form .${channelClass} input[value="DSA"]`).prop("checked",true);await saveRecord();if(typeof window.hideSpinner==="function"){window.hideSpinner();}}});$(`#${divFormId} form .${brandTwlClass} select`).change(async function(e){if(typeof window.showSpinner==="function"){window.showSpinner();}
await saveRecord();if(typeof window.hideSpinner==="function"){window.hideSpinner();}});$(`#${divFormId} form .${provinceClass} select`).change(async function(e){$(`#${divFormId} form .${districtClass} select`).find('option[value!=""]').remove();var provinceKey=$(this).find("option:selected").data("id");if(!provinceKey)return;showDistrict(provinceKey)});$(`#${divFormId} form input[name="__prev"]`).click(function(event){event.preventDefault();$(this).off("click");window.location.href="/";$.aPost(`/Umbraco/Api/Register/ClearRecordIdSession?${contentIdConstant}=${contentId}`,function(response){},"json");});function showDistrict(provinceKey){const selectElement=$(`#${divFormId} form .${districtClass} select`);selectElement.find('option[value!=""]').remove();if(provinceKey){showSpinner()
fetch("/umbraco/api/District/GetListByProvinceKey?provinceKey="+provinceKey).then(response=>response.json()).then(data=>{if(data.length>0){let isVi=$("html").attr("lang")||"vi"=="vi";data.forEach(function(item){selectElement.append(`<option value="${item.key}" data-supported="${item.isLeadgenSupported}">${isVi ? item.nameVN : item.NameEN}</option>`);});}
hideSpinner();}).catch(error=>{console.error(error);hideSpinner();});}}
$(`#${divFormId} form .${channelClass} input[type="radio"]`).change(async function(e){if(typeof window.showSpinner==="function"){window.showSpinner();}
await saveRecord();if(typeof window.hideSpinner==="function"){window.hideSpinner();}});await getRecord();if(hasProductType){let params=new URLSearchParams(queryString);params.set("isProduct","true");queryString=`?${params.toString()}`;}
if(step===StepEnum.Transition)showResponse(collectionClass);else{toggleFieldsetParts(`#${divFormId} form .umbraco-forms-page`,validateRecordId()?2:1);if(typeof window.showSpinner==="function"){window.showSpinner();}
await saveRecord();if(typeof window.hideSpinner==="function"){window.hideSpinner();}}
async function collectLead(){await refreshRecaptcha($(`#${divFormId} form`));clearValidationErrorsLead();let formData=getFormData();if(hasProductType)
formData.push({name:mktFormConstant,value:productType});try{let response=await new Promise((resolve,reject)=>{$.aPost(`/Umbraco/Api/Register/CollectLeadInfo${queryString}`,formData,function(response){if(response){resolve(response);}else{reject(new Error("Failed to get data"));}},"json");});if(response.status===RegisterLeadResEnum.Success||response.record?.uniqueId){recordId=response.record?.uniqueId;recordElement.val(recordId||"");showResponse(collectionClass);window.LeadGenID=response.record.id;}else if(response.status===RegisterLeadResEnum.Rejected){showResponse(rejectedClass);}else if(response.status===RegisterLeadResEnum.Approved){showResponse(approvedClass);}else if(response.status===RegisterLeadResEnum.ExistedNID){showError(nidClass,existMessage);}else if(response.status===RegisterLeadResEnum.ExistedPhone){showError(phoneClass,existMessage);}else if(response.status===RegisterLeadResEnum.Error||response.status===RegisterLeadResEnum.InactiveAddress){showResponse(errorClass);}else if(response.status===RegisterLeadResEnum.RateLimitedIp){showResponse(rateClass);}else if(response.status===RegisterLeadResEnum.InvalidNID){showError(nidClass,unQualificationMessage);}else if(response.status===RegisterLeadResEnum.Invalid){displayValidationErrorsLead(response);}else{showResponse(errorClass);}}catch(error){showResponse(errorClass);}finally{}}
async function skip(){if(typeof window.showSpinner==="function"){window.showSpinner();}
let formData=getFormData();try{let response=await new Promise((resolve,reject)=>{$.aPost(`/Umbraco/Api/Register/Skip`,formData,function(response){if(response){resolve(response);}else{reject(new Error("Failed to get data"));}},"json");});recordElement.val("");if(response.status===RegisterLeadResEnum.Success){showResponse(skipSuccessClass);window.LeadGenID=response.record.id;}else if(response.status===RegisterLeadResEnum.ProcessLead){showResponse(processClass);}else{showResponse(errorClass);}}catch(error){showResponse(errorClass);}finally{if(typeof window.hideSpinner==="function"){window.hideSpinner();}}}
async function saveRecord(){if(reloading||!validateRecordId())return;let formData=getFormData();try{let response=await new Promise((resolve,reject)=>{$.aPost("/Umbraco/Api/Register/SaveAdditionalInfo",formData,function(response){if(response){resolve(response);let eligiblePhone="";let lastSelectedChanel="";var record=response.record;if(record&&record.recordFields){for(const[key,field]of Object.entries(record.recordFields)){let alias=field.alias.toLowerCase();let value=field.values.length>0?field.values[0]:null;if(alias===productClass){productLeastSelect=value;}
if(alias===channelClass){lastSelectedChanel=value;}
if(alias===eligible){eligiblePhone=value==="Y"?`XSTU_${lastSelectedChanel}`:`NOTXSTU_${lastSelectedChanel}`;}}}
const combinedValue=`${productLeastSelect}_${eligiblePhone}`.trim();AddElementDivTag("umbraco-forms-page",combinedValue);}else{reject(new Error("Failed to get data"));}},"json");});return response;}catch(error){showResponse(errorClass);return null;}}
async function submitRecord(){let formData=getFormData();try{let response=await new Promise((resolve,reject)=>{$.aPost(`/Umbraco/Api/Register/Submit${queryString}`,formData,function(response){if(response){resolve(response);}else{reject(new Error("Failed to get data"));}},"json");});recordElement.val("");if(response.status===RegisterLeadResEnum.Success){showResponse(successClass);window.LeadGenID=response.record.id;AddElementDivTag("lead-gen-form-success-content",response.record.id.toString());AddTrackingConversionImageTag(response.record.id.toString());step=StepEnum.Step_3;removeClassEvent();}else if(response.status===RegisterLeadResEnum.ProcessLead){showResponse(processClass);}else if(response.status===RegisterLeadResEnum.Rejected){showResponse(rejectedClass);}else{showResponse(errorClass);}}catch(error){showResponse(errorClass);}finally{let formData=$(`#${divFormId} form`);formData.trigger("reset");recordElement.val("");}}
function AddElementDivTag(elementTarget,combineValue){const $targetElement=$(`.${elementTarget}`);if($targetElement.length){let $hiddenDiv=$targetElement.siblings("div.hidden-info");if($hiddenDiv.length){$hiddenDiv.attr("class",`hidden-info hidden ${combineValue ?? ""}`);}else{$hiddenDiv=$("<div>",{class:`hidden-info hidden ${combineValue ?? ""}`,css:{display:"none",},});$targetElement.before($hiddenDiv);}}}
function AddTrackingConversionImageTag(CRMID){const $targetElements=$(".lead-gen-form-success-content");if($targetElements.length){$targetElements.each(function(){const $targetElement=$(this);if(!$targetElement.siblings(`img[src*="ORDERID=${CRMID}"]`).length){const trackingImg=$("<img>",{src:`${marketingPixel + CRMID}`??"",width:1,height:1,alt:"Tracking Conversion",style:"display: none !important",});$targetElement.before(trackingImg);}});}}
async function getRecord(){if(reloading)return;reloading=true;try{let response=await new Promise((resolve,reject)=>{$.aPost(`/Umbraco/Api/Register/GetRecord?contentId=${contentId}`,{},function(response){if(response){resolve(response);}else{reject(new Error("Failed to get data"));}},"json");});var record=response.record;if(!record||record.id===0)return;step=response.step;recordId=record.uniqueId;recordElement.val(recordId);var district="";var province="";for(const[key,field]of Object.entries(record.recordFields)){let fieldId=field.fieldId;let value=field.values.length>0?field.values[0]:null;let alias=field.alias.toLowerCase();if(value){if(alias===productClass){$(`#${divFormId} form .${productClass} input[type="radio"]`).each(function(){const optionValue=$(this).val();if(optionValue===value){$(this).next("label").click();if(optionValue==="cdl"||optionValue==="twl")
$(`#${divFormId} form .${channelClass} input[value="DSA"]`).prop("checked",true).trigger("change");return;}});}else if(alias===channelClass){$(`#${divFormId} form .${channelClass} input[value="${value}"]`).click();}else if(alias===provinceClass){province=value;}else if(alias===districtClass){district=value;}else{let element=$(`#${divFormId} form input[name="${fieldId}"][type="text"]`);if(element.length>0){element.val(value);}else{$(`#${divFormId} form select[name="${fieldId}"]`).val(value);}}}}
if(province||district){$(`#${divFormId} form .${provinceClass} select`).val(province);showDistrict(province);$(`#${divFormId} form .${districtClass} select`).val(district);}}catch(error){showResponse(errorClass);}finally{initProduct();reloading=false;}}
$(`#${popupListId} a[rel*="nextToAddition"]`).click(async function(e){e.preventDefault();if(validateRecordId())await nextToAddition();else retry();});$(`#${popupListId} a[rel*="back"]`).click(async function(e){e.preventDefault();await skip();});$(`#${popupListId} a[rel*="prev"]`).click(function(e){e.preventDefault();retry();});function initProduct(){hasProductType=false;if(!isProduct||!productType)return;$(`#${divFormId} form .${productClass} input[type="radio"]`).each(function(){const optionValue=$(this).val().toLowerCase();if(optionValue===productType.toLowerCase()){hasProductType=true;$(this).next("label").click();if(optionValue==="cdl"||optionValue==="twl")
$(`#${divFormId} form .${channelClass} input[value="DSA"]`).prop("checked",true).trigger("change");return;}});}
async function nextToAddition(){if(typeof window.showSpinner==="function"){window.showSpinner();}
await saveRecord();hideOrShowTransition();toggleFieldsetParts(`#${divFormId} form .umbraco-forms-page`,2);initAddClassEvent();if(typeof window.hideSpinner==="function"){window.hideSpinner();}}
function retry(){if(typeof window.showSpinner==="function"){window.showSpinner();}
window.location.reload();}
function hideOrShowTransition(isHide=true){if(isHide){$(`#${popupListId}`).hide();$(`#${popupListId}`).children("div").hide();}else{$(`#${popupListId}`).children("div").hide();$(`#${popupListId}`).show();}}
function showResponse(classElement){window.LeadGenID=undefined;step=classElement===collectionClass?StepEnum.Transition:"";$(`#${leadGenFormId}`).hide();let className=`lead-gen-form-${classElement}-content`;hideOrShowTransition(false);$(`.${className}`).show();scrollToTop();}
function toggleFieldsetParts(divSelector,stepShow=1){window.LeadGenID=undefined;let divContainingSubmitButton=$(`#${divFormId} form`).find("input[type='submit']").closest("div");divContainingSubmitButton.find("span").remove();const divElement=$(divSelector);let foundEmptyFieldset=false;step=stepShow!=1?StepEnum.Step_2:"";if(stepShow===1){$("#header-first-step").show();divElement.children("fieldset").each(function(index,fieldset){if(isFieldsetEmpty(fieldset)){foundEmptyFieldset=true;$(fieldset).prevAll().addBack().show();$(fieldset).nextAll().addBack().hide();}});if(!foundEmptyFieldset){divElement.children("fieldset").show();}
$("#skip-step-2")?.parent("div")?.remove();$('input[data-umb="next-forms-form"]').addClass(`btn_${productType ? productType : productTypeDefault}_step1`).removeClass(`btn_${productType ? productType : productTypeDefault}_step2`);}else{$("#header-first-step").hide();divElement.children("fieldset").each(function(index,fieldset){if(isFieldsetEmpty(fieldset)){foundEmptyFieldset=true;$(fieldset).prevAll().addBack().hide();$(fieldset).nextAll().show();}});$(`#${divFormId} form div:has(input[name="__next"])`).last().each(function(){if($(this).find("#skip-step-2").length===0){$(this).prepend(`<div class="d-flex" style="width: 148;margin: 0 20px 0 0;">
  <a class="btn c1-btn-bg c1-btn-bg-solid c1-btn-bg-hover-solid c1-btn-text c1-btn-borders flex-center"
                                          style="width: 148px;column-gap:4px" href="#" id="skip-step-2">
                                          Bỏ qua
  </a>
  </div>`);}});$(`#${divFormId} form div:has(input[name="__next"])`).last().on("click","#skip-step-2",async function(e){e.preventDefault();await skip();});$('input[data-umb="next-forms-form"]').removeClass(`btn_${productType ? productType : productTypeDefault}_step1`).addClass(`btn_${productType ? productType : productTypeDefault}_step2`);$("#skip-step-2").addClass(`btn_${productType ? productType : productTypeDefault}_step2_skip`);}
if(!foundEmptyFieldset){divElement.children("fieldset").show();}
if(hasProductType){$(`#${divFormId} form .${productClass}`).hide();}
$(`${divSelector} .umbraco-forms-navigation`)?.show();$(`#${leadGenFormId}`).show();if(stepShow!=1)scrollToTop();}
function scrollToTop(){const targetOffset=$(".lead-gen-form-contain.inner").offset().top-150;$("html, body").each(function(){$(this).animate({scrollTop:targetOffset},500);});}
function isFieldsetEmpty(fieldset){const container=$(fieldset).find(".umbraco-forms-container");return container.length>0&&$.trim(container.html())==="";}
$(`#${divFormId} form`).submit(async function(e){e.preventDefault();if(isDisable||isSubmitting){return false;}
isSubmitting=true;$(`#${divFormId} form input[type="submit"]`).prop("disabled",true);clearValidationErrorsLead();if(typeof window.showSpinner==="function"){window.showSpinner();}
try{if(validateRecordId()){await submitRecord();}else{await collectLead();}}catch(e){showResponse(errorClass);}finally{if(typeof window.hideSpinner==="function"){window.hideSpinner();}
isSubmitting=false;$(`#${divFormId} form input[type="submit"]`).prop("disabled",false);}});function getFormData(){var province_select=$(`.umbraco-forms-field.${provinceClass} select`);if(province_select){province_select.find('option').each(function(){var $opt=$(this);var id=$opt.attr('data-id');if(id){$opt.val(id);}});}
let formData=$(`#${divFormId} form`).serializeArray();let filteredFormData=[];let checkboxNames=new Set();formData.forEach((field)=>{if(checkboxNames.has(field.name)){return;}
let checkboxInput=$(`#${divFormId} form input[name="${field.name}"][type="checkbox"]`);if(checkboxInput.length>0){field.value=checkboxInput.is(":checked")?"true":"false";checkboxNames.add(field.name);}
if(field.name===nidField.id){field.value=field.value.replace(/\s+/g,"");}
filteredFormData.push(field);});filteredFormData.push({name:contentIdConstant,value:contentId});return filteredFormData;}
function validateRecordId(){const id=recordElement.val();if(!id||id==="00000000-0000-0000-0000-000000000000")return false;return true;}
function displayValidationErrorsLead(result){const message=result?.errorMessage||"Please correct the following errors:";const validationErrors=result?.validationErrors;if(!validationErrors||Object.keys(validationErrors).length===0){return;}
if(validationErrors&&typeof validationErrors==='object'){Object.keys(validationErrors).forEach(fieldName=>{const errorMessages=validationErrors[fieldName];if(Array.isArray(errorMessages)){errorMessages.forEach(errorMessage=>{showFieldErrorLead(fieldName,errorMessage);});}else{showFieldErrorLead(fieldName,errorMessages);}});}}
function showFormErrorLead(message){$(`#${divFormId} .form-general-error`).remove();const errorHtml=`<div class="form-general-error alert alert-danger" role="alert">${message}</div>`;$(`#${divFormId} form`).prepend(errorHtml);}
function showFieldErrorLead(fieldName,message){let $field=$(`#${divFormId} form input[name="${fieldName}"], #${divFormId} form input[id="${fieldName}"]`);let $fieldContainer=null;if(fieldName.toLowerCase().includes('recaptcha')||$field.length===0){$field=$(`#${divFormId} form input[name="g-recaptcha-response"]`);if($field.length>0){$field.next('.field-validation-error').remove();const errorHtml=`<span class="field-validation-error text-danger small d-block" style="margin-top: 5px;">${message}</span>`;$field.after(errorHtml);return;}
$fieldContainer=$(`#${divFormId} form [class*="recaptcha"], #${divFormId} form .g-recaptcha`).closest('.umbraco-forms-field');if($fieldContainer.length===0){$fieldContainer=$(`#${divFormId} form`);const errorHtml=`<div class="field-validation-error text-danger small recaptcha-error" style="margin-top: 10px;">${message}</div>`;$fieldContainer.find('.recaptcha-error').remove();$fieldContainer.append(errorHtml);return;}}else{$fieldContainer=$field.closest('.umbraco-forms-field');}
if($fieldContainer&&$fieldContainer.length>0){$fieldContainer.find('.field-validation-error').remove();if($field.length>0){$field.removeClass('input-validation-error');$field.addClass('input-validation-error');}
const errorHtml=`<span class="field-validation-error text-danger small">${message}</span>`;$fieldContainer.append(errorHtml);}}
function showError(classElement,inputMessage,element="input"){if(!inputMessage){$(`#${divFormId} form .${classElement} div ${element}`).removeClass("input-validation-error").addClass("field-validation-valid").attr("aria-invalid","false");$(`#${divFormId} form .${classElement} div span`).addClass("field-validation-valid").removeClass("field-validation-error").empty();return;}
$(`#${divFormId} form .${classElement} div ${element}`).removeClass("valid").addClass("input-validation-error").attr("aria-invalid","true");$(`#${divFormId} form .${classElement} div span`).removeClass("field-validation-valid").addClass("field-validation-error").empty();$(`#${divFormId} form .${classElement} div span`).append(`<span>${inputMessage}</span>`);}
$("body").append(`<div class="modal fade custom-modal" id="customModal" tabindex="-1" aria-hidden="true">
                    <div class="modal-dialog custom-modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <div class="modal-icon">
                                    <img src="/assets/icons/warning.png" alt="img" class="lazyload" loading="lazy"/>
                                </div>
                            </div>
                            <div class="modal-body">
                              <h5 class="modal-title">Thông tin chưa được gửi</h5>
                                <p class="notice">Thông tin quý khách đã nhập sẽ không được lưu nếu rời khỏi trang.</p>
                            </div>
                            <div class="modal-footer">
                               <button type="button" class="btn btn-outline-success" id="confirmNavigation">OK</button>
                            <button type="button" class="btn btn-success" data-bs-dismiss="modal">Quay lại</button>
                            </div>
                        </div>
                    </div>
                </div>`);function formatNID(value){let cleanedValue=value.replace(/\D/g,"");let formattedValue=cleanedValue.replace(/(\d{3})(?=\d)/g,"$1 ").trim();return formattedValue.trim();}
if(nidField){nidField.addEventListener("input",function(){let currentValue=this.value;let formattedValue=formatNID(currentValue);let maxLength=$(this).attr("maxlength");if(maxLength&&formattedValue.length>maxLength){formattedValue=formattedValue.substring(0,maxLength);}
this.value=formattedValue;});}
$(`#${divFormId} form .${phoneClass} input`).on("input",function(){let regexPattern=$(this).data("val-regex-pattern");if(regexPattern){let regex=new RegExp(regexPattern);if(!regex.test(this.value)){this.value=this.value.replace(/[^0-9]/g,"");}}else{this.value=this.value.replace(/[^0-9]/g,"");}
let maxLength=$(this).attr("maxlength");if(maxLength&&this.value.length>maxLength){this.value=this.value.substring(0,maxLength);}});function initAddClassEvent(){$("a").addClass("step2");}
function removeClassEvent(){$("a").removeClass("step2");}
const modal=new bootstrap.Modal(document.getElementById("customModal"),{backdrop:false,focus:true,});var url="";$("#confirmNavigation").on("click",function(){window.location.href=url;BackToStep1();});$("body").on("click","a",function(e){const target=$(this).attr("target");if(target==="_blank"){return;}
e.preventDefault();url=$(this).attr("href");if(step===StepEnum.Step_2||step===StepEnum.Transition){if(url&&url!="#"){modal.show();}}else{window.location.href=url;}});if(step==StepEnum.Step_2){initAddClassEvent();}
function BackToStep1(){let formData=$(`#${divFormId} form`);$.aPost(`/Umbraco/Api/Register/ClearRecordIdSession?${contentIdConstant}=${contentId}`,function(){},"json");formData.trigger("reset");recordElement.val("");recordId="";initProduct();}});;;
const myProductTabPCCarousel=document.getElementById("carouselProductTabPCIndicators");if(myProductTabPCCarousel){const carousel=new bootstrap.Carousel(myProductTabPCCarousel);window.addEventListener("load",function(){fillCarouselIndicator(1,myProductTabPCCarousel.querySelectorAll(".carousel-indicators button span"));});myProductTabPCCarousel.addEventListener("slide.bs.carousel",function(e){let index=e.to;UpdateContent($(myProductTabPCCarousel).find(".carousel-item").eq(index));fillCarouselIndicator(++index,myProductTabPCCarousel.querySelectorAll(".carousel-indicators button span"));});function UpdateContent(selectContent){if(selectContent){let $sourceContent=$(selectContent).find(".containContent");if($sourceContent.length){let newContent=$sourceContent.html();$(".showContent").fadeOut(430,function(){$(".showContent").html(newContent);$(".showContent").fadeIn(430);$(".showContent").css({opacity:0,transform:"translateY(-10px)",}).animate({opacity:1,transform:"translateY(0px)",},430);});}}}
let intervalID;function fillCarouselIndicator(index,carouselIndicators){let i=0;for(const carouselIndicator of carouselIndicators){carouselIndicator.style.width=0;}
if(index>1){for(var z=0;z<index;z++){carouselIndicators[z].style.width="100%";}}
clearInterval(intervalID);carousel.pause();intervalID=setInterval(function(){i++;myProductTabPCCarousel.querySelector(".carousel-indicators .active span").style.width=i+"%";if(i>=100){carousel.next();}},50);}}
const myProductTabCarousel=document.getElementById("carouselProductTabIndicators");if(myProductTabCarousel){const carousel=new bootstrap.Carousel(myProductTabCarousel);const scrollLeftValueSpeed=500;window.addEventListener("load",function(){fillCarouselIndicator(1,myProductTabCarousel.querySelectorAll(".carousel-indicators button span"));});myProductTabCarousel.addEventListener("slide.bs.carousel",function(e){const carouselContainerWidth=myProductTabCarousel.offsetWidth;const arrowIndicatorWidth=myProductTabCarousel.querySelector("div > div > div > div.arrow-indicators").offsetWidth;let index=e.to;if(index>2){const scrollLeftValue=10000;$("#carouselProductTabIndicators .carousel-indicators").animate({scrollLeft:scrollLeftValue},scrollLeftValueSpeed);}else if(index>1){const scrollLeftValue=(carouselContainerWidth-arrowIndicatorWidth*2)/2;$("#carouselProductTabIndicators .carousel-indicators").animate({scrollLeft:scrollLeftValue},scrollLeftValueSpeed);}else{$("#carouselProductTabIndicators .carousel-indicators").animate({scrollLeft:0},500);}
fillCarouselIndicator(++index,myProductTabCarousel.querySelectorAll(".carousel-indicators button span"));});$("#carouselProductTabIndicators .arrow-indicators-right").click(function(){const scrollLeftValue=1000;$("#carouselProductTabIndicators .carousel-indicators").animate({scrollLeft:scrollLeftValue},scrollLeftValueSpeed);});$("#carouselProductTabIndicators .arrow-indicators-left").click(function(){$("#carouselProductTabIndicators .carousel-indicators").animate({scrollLeft:0},scrollLeftValueSpeed);});let intervalID;function fillCarouselIndicator(index,carouselIndicators){let i=0;for(const carouselIndicator of carouselIndicators){carouselIndicator.style.width=0;}
if(index>1){for(var z=0;z<index;z++){carouselIndicators[z].style.width="100%";}}
clearInterval(intervalID);carousel.pause();intervalID=setInterval(function(){i++;myProductTabCarousel.querySelector(".carousel-indicators .active span").style.width=i+"%";if(i>=100){carousel.next();}},50);}}
$(document).ready(function(){const carousel_item_width_customing=()=>{const screenWidth=window.screen.width;const isOnMobileScreenResponsive=Boolean($(".tab-item.mobile").length);if(screenWidth<=768&&isOnMobileScreenResponsive){const mobileCarouselIndicators=document.querySelector(".tab-item.mobile > div#carouselProductTabIndicators");if(mobileCarouselIndicators){const lastButtonElement=mobileCarouselIndicators.querySelector("div.carousel-indicators > button:last-child");if(lastButtonElement){const afterWidth=window.getComputedStyle(lastButtonElement,"::after").width;const rendered_width=`${
            parseFloat(afterWidth.replace("px", "")) + 24
          }px`;if(typeof rendered_width=="string"){lastButtonElement.style.width=rendered_width;}
$(lastButtonElement).wrap("<div class='d-flex justify-content-center w-100' style='flex:0 0 auto;'></div>");}}}
const buttonElements=Array.from(document.querySelectorAll("div#carouselProductTabPCIndicators .tab-item.desktop > .tab-item-left .carousel-indicators > button"));if(Boolean(buttonElements.length)){buttonElements.forEach((button_element)=>{const afterWidth=window.getComputedStyle(button_element,"::after").width;const rendered_width=`${
          parseFloat(afterWidth.replace("px", "")) + 24
        }px`;if(typeof rendered_width=="string"){button_element.style.width=rendered_width;}});}};window.addEventListener("resize",carousel_item_width_customing,true);carousel_item_width_customing();});;;
const myCarousel=document.getElementById("carouselExploreIndicators");if(myCarousel){const carouselIndicators=myCarousel.querySelectorAll(".carousel-indicators button span");const carousel=new bootstrap.Carousel(myCarousel);window.addEventListener("load",function(){showPopup();fillCarouselIndicator(1,myCarousel.querySelectorAll(".carousel-indicators button span"));});myCarousel.addEventListener("slid.bs.carousel",function(e){showPopup();});myCarousel.addEventListener("slide.bs.carousel",function(e){let index=e.to;if(index>1){$("#carouselExploreIndicators .carousel-indicators").animate({scrollLeft:1000},500);}else{$("#carouselExploreIndicators .carousel-indicators").animate({scrollLeft:0},500);}
fillCarouselIndicator(++index,myCarousel.querySelectorAll(".carousel-indicators button span"));});$("#carouselExploreIndicators .arrow-indicators-right").click(function(){$("#carouselExploreIndicators .carousel-indicators").animate({scrollLeft:1000},500);});$("#carouselExploreIndicators .arrow-indicators-left").click(function(){$("#carouselExploreIndicators .carousel-indicators").animate({scrollLeft:0},500);});let intervalID;function adjustTooltipPositionRight(tooltip){const parent=tooltip.parent();const container=tooltip.parent().parent();const tooltipWidth=tooltip.outerWidth(true);const containerWidth=container.width();const parentWidth=parent.width();const targetLeft=parseFloat(tooltip.attr("target-left"));const overflowRight=containerWidth-
(tooltipWidth+
(parentWidth*targetLeft)/100+
(containerWidth-parentWidth)/2);if(overflowRight<0){return`${overflowRight}px`;}
return`0px`;}
function adjustTooltipPositionLeft(tooltip){const parent=tooltip.parent();const container=tooltip.parent().parent();const tooltipWidth=tooltip.outerWidth(true);const containerWidth=container.width();const parentWidth=parent.width();const targetLeft=parseFloat(tooltip.attr("target-left"));const overflowLeft=containerWidth-
(tooltipWidth+
(parentWidth-(parentWidth*targetLeft)/100)+
(containerWidth-parentWidth)/2);if(overflowLeft<0){return`${Math.abs(overflowLeft)}px`;}
return`0px`;}
function showPopup(){hidePopup();var activeCarou=$("#carouselExploreIndicators").find(".carousel-item.active");if(activeCarou){var child_right=activeCarou.find(".carousel-item-child.item-child-right");if(child_right){$(child_right).each(function(){$(this).removeClass("popup-right-hide").addClass("popup-right-show").css("left",`calc(${$(this).attr(
                                "target-left"
                            )} + ${adjustTooltipPositionRight($(this))})`);});}
var child_left=activeCarou.find(".carousel-item-child.item-child-left");if(child_left){$(child_left).each(function(){$(this).removeClass("popup-left-hide").addClass("popup-left-show").css("left",`calc(${$(this).attr("target-left")} - ${$(this).outerWidth(
                                true
                            )}px + ${adjustTooltipPositionLeft($(this))}`);});}}}
function hidePopup(){$("#carouselExploreIndicators").find(".carousel-item-child.popup-right-show").removeClass("popup-right-show").addClass("popup-right-hide").css("left","100%");$("#carouselExploreIndicators").find(".carousel-item-child.popup-left-show").removeClass("popup-left-show").addClass("popup-left-hide").css("left","-100%");}
function fillCarouselIndicator(index,carouselIndicators){let i=0;if(!carouselIndicators||carouselIndicators.length===0)return;for(const indicator of carouselIndicators){if(indicator?.style){indicator.style.width=0;}}
if(index>1){for(let z=0;z<index;z++){if(carouselIndicators[z]?.style){carouselIndicators[z].style.width="100%";}}}
clearInterval(intervalID);carousel.pause();intervalID=setInterval(function(){i++;const activeSpan=myCarousel.querySelector(".carousel-indicators .active span");if(activeSpan?.style){activeSpan.style.width=i+"%";}
if(i>=85){hidePopup();}
if(i>=100){carousel.next();}},70);}}
$("document").ready(function(){const buttonElementsExplores=Array.from(document.querySelectorAll("div#carouselExploreIndicators .carousel-indicators > button"));buttonElementsExplores.forEach((button_element)=>{const after_child_width=window.getComputedStyle(button_element,"::after").width;const rendered_width=`${parseFloat(after_child_width.replace("px", "")) +
            parseFloat($(button_element).css("padding-left")) * 2
            }px`;button_element.style.width=rendered_width;});});;;
$(document).ready(function(){$(".achievements-slider").slick({dots:false,arrows:false,infinite:false,autoplay:false,slidesToShow:3,slidesToScroll:3,prevArrow:'<button type="button" class="slick-prev achievements-prev"><</button>',nextArrow:'<button type="button" class="slick-next achievements-next">></button>',responsive:[{breakpoint:992,settings:{slidesToShow:2,slidesToScroll:2,arrows:false,},},{breakpoint:768,settings:{slidesToShow:1,slidesToScroll:1,arrows:false,},},],});$(".achievements-slider").on("afterChange",function(event,slick,currentSlide){$(".achievements-indicator").removeClass("active");currentSlide=currentSlide-(currentSlide%3);$('.achievements-indicator[data-slide="'+currentSlide+'"]').addClass("active");});$("body").on("click",".achievements-indicator",function(){var el=$(this);if(!el.hasClass("ellipsis")){var maxSlide=Number(el.attr("max"));var index=$(".achievements-indicator:not('.ellipsis')").index(el);updateAchievePagination(index,maxSlide);var slideIndex=Number(el.data("slide"));$(".achievements-slider").slick("slickGoTo",slideIndex);}})
function updateAchievePagination(index,maxSlide){if(maxSlide&&maxSlide>5){$(".achievements-indicator.ellipsis").remove();var indicators=$(".achievements-indicator:not('.ellipsis')").removeClass("hidden");if(index<=2){indicators.each(function(i){if(i>3&&i<maxSlide-1){$(this).addClass("hidden");}});indicators.eq(maxSlide-1).before('<span class="achievements-indicator ellipsis">...</span>');}
else if(index>=maxSlide-3){indicators.each(function(i){if(i!==0&&i<maxSlide-4){$(this).addClass("hidden");}});indicators.eq(1).after('<span class="achievements-indicator ellipsis">...</span>');}
else{indicators.each(function(i){if(i!==0&&i!==maxSlide-1&&(i<index-1||i>index+1)){$(this).addClass("hidden");}});indicators.eq(1).after('<span class="achievements-indicator ellipsis">...</span>');indicators.eq(maxSlide-2).before('<span class="achievements-indicator ellipsis">...</span>');}}}
$(".achievements-indicator").first().addClass("active");});;;
const handleIntersect=(entries,observer)=>{entries.forEach(entry=>{if(entry.isIntersecting){$(entry.target).addClass('visible');observer.unobserve(entry.target);}});};const observer=new IntersectionObserver(handleIntersect,{root:null,rootMargin:'0px',threshold:0.2});$('.stats-item').each(function(){observer.observe(this);});;;
document.querySelectorAll(".nav-pro-link").forEach((button)=>{button.addEventListener("click",function(e){e.preventDefault();this.closest(".content.component").scrollIntoView({behavior:"smooth",});});});;;
const errorClassRating="error";const ratingFlagInput=document.querySelector("input[name='ratingFlag']");function initRatingForm(formEl){const root=formEl.closest(".rating-root")||formEl;if(root.dataset.initialized==="1")return;root.dataset.initialized="1";if(root){var ratePosition=(root.dataset.ratePosition||"homepage").toLowerCase();const rateTitle=root.dataset.ratingTitle||"";const iconImg=root.querySelector(".rating-icon img");const popup=root.querySelector(".rating-popup");const closeBtn=root.querySelector(".close-popup");const delayField=root.querySelector("input[name='ratingPopupDelay']");const delayMinutes=parseInt(delayField?.value||"5",10);var isRatingSubmit=false;var repaymentTerm=true;var closeRatingBtn=root.querySelector(".close-rating");const ratingRadios=root.querySelectorAll(".starrate .radiobuttonlist input[type='radio']");const labelList=root.querySelectorAll(`.starrate .radiobuttonlist-horizontal div:has(input[type="radio"]) > label`);const ratePositionEL=root.querySelector(`.umbraco-forms-page .umbraco-forms-field.rateposition`);const messageSuccess=root.querySelector(`.umbraco-forms-submitmessage-html`);const $ratingForm=window.jQuery?window.jQuery(formEl):null;const postLoginRating=root.closest(".post-login");if($ratingForm){$ratingForm.trigger("reset");if(!postLoginRating){controlRatingVisibility(`rating_${ratePosition}_block_until`);updateRatePosition();}
changeStatusIcon(ratingRadios,4);if(labelList.length){labelList.forEach((label,index)=>{label.innerHTML=`
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="icon icon-tabler icons-tabler-filled icon-tabler-star">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <path d="M8.243 7.34l-6.38 .925l-.113 .023a1 1 0 0 0 -.44 1.684l4.622 4.499l-1.09 6.355l-.013 .11a1 1 0 0 0 1.464 .944l5.706 -3l5.693 3l.1 .046a1 1 0 0 0 1.352 -1.1l-1.091 -6.355l4.624 -4.5l.078 -.085a1 1 0 0 0 -.633 -1.62l-6.38 -.926l-2.852 -5.78a1 1 0 0 0 -1.794 0l-2.853 5.78z" />
          </svg>
          `;if(label.classList.contains("checked")){label.classList.remove("checked");label.checked=false;}
label.addEventListener("click",()=>{labelList.forEach((r,i)=>{if(i<=index){r.classList.add("checked");}else{r.classList.remove("checked");}});});});}
if(rateTitle&&rateTitle!=""){updateTitle(root,rateTitle);}
if(ratePositionEL){ratePositionEL.classList.add("d-none");}
$ratingForm.off("submit.rating");$ratingForm.on("submit.rating",async function(e){e.preventDefault();try{if(isRatingSubmit)return;isRatingSubmit=true;if(typeof window.showSpinner==="function"){window.showSpinner();}
if(!iconImg)return;await refreshRecaptcha(this);var submitRating=await submitRecordRating(this);if(repaymentTerm&&ratePosition==="repayment"){let recordId=submitRating?.data||"";let recordIdEl=this.querySelector("input[name='RecordId']");if(recordIdEl&&recordId&&recordId!=""){recordIdEl.value=recordId;}
updateRepaymentTerm();updateIconByRating(11,7);let starRateEl=this.querySelector(".starrate");if(starRateEl){starRateEl.classList.add("d-none");}
let npsChoiceEl=this.querySelectorAll(".netpromoterscore .radiobuttonlist input[type='radio']");if(npsChoiceEl.length){changeStatusIcon(npsChoiceEl,7);}
repaymentTerm=false;}else{const msg=(submitRating&&(submitRating.message??submitRating.Message))||"";let notifyEl=root.querySelector("#rating-submited-notify");this.style.display="none";iconImg?.classList.add("d-none");if(msg.trim()===""){if(!notifyEl)return;notifyEl.style.display="flex";notifyEl.innerHTML=`
                <div class="popup-icon-image-success" style="text-align: center;"><img style="width: 60px; height: 60px;" class="img-fluid lazyload" src="/assets/icons/Success.png" alt="Thành công!"></div>
                <div class="rating-message" style="display: flex; flex-direction: column; gap: 8px;">
                    <div class="rating-message-title" style="text-align: center; font-size: 20px; color: #292929; line-height: 140%;"><strong>Cảm ơn quý khách đã phản hồi!</strong></div>
                    <div class="rating-message-text flex-center" style="text-align: center; font-size: 14px; color: #747474; line-height: 150%;">FE CREDIT luôn nỗ lực cải thiện trải nghiệm của quý khách</div>
                </div>
              `;if(postLoginRating){ratePosition=root.dataset.ratePosition.toLowerCase();}
setCookie(`rating_${ratePosition}_block_until`,"1",firstDayOfNextMonthLocal());if(root.closest("section")){setTimeout(()=>{root.closest("section").style.display="none";},5000);}else if(root.closest(".rating-component")){setTimeout(()=>{root.closest(".rating-component").classList.add("d-none");},3000);}else{setTimeout(()=>{root.style.display="none";},3000);}}else{if(!notifyEl.length)return;notifyEl.style.display="flex";notifyEl.innerHTML=`
            <div class="popup-icon-image-success" style="text-align: center;"><img style="width: 60px; height: 60px;" class="img-fluid lazyload" src="/assets/icons/Error.png" alt="Thành công!"></div>
            <div class="rating-message" style="display: flex; flex-direction: column; gap: 8px;">
                <div class="rating-message-title" style="text-align: center; font-size: 20px; color: #292929; line-height: 140%;"><strong>Phản hồi không thành công</strong></div>
                <div class="rating-message-text" style="text-align: center; font-size: 14px; color: #747474; line-height: 150%;">Quý khách vui lòng thử lại sau.</div>
            </div>
          `;}
if(typeof window.hideSpinner==="function"){window.hideSpinner();}}}catch(err){console.error(err);}finally{if(typeof window.hideSpinner==="function"){window.hideSpinner();}
isRatingSubmit=false;}});}
function getFormData(form){return new Promise((resolve,reject)=>{try{let formData=window.jQuery(form).serializeArray();let filteredFormData=[];let checkboxNames=new Set();formData.forEach((field)=>{if(checkboxNames.has(field.name)){return;}
filteredFormData.push(field);});resolve(filteredFormData);}catch(error){reject(error);}});}
async function submitRecordRating(form){let formData=await getFormData(form);try{const response=await new Promise((resolve,reject)=>{$.ajax({url:`/umbraco/api/Rating/SaveRating`,type:"POST",data:formData,dataType:"json",success:function(res){if(res!==undefined&&res!==null){resolve(res);}else{reject({status:200,message:"Unexpected empty response"});}},error:function(xhr){const errorJson=xhr.responseJSON||{};reject({error:true,status:xhr.status,message:errorJson.message||"Request failed",errorType:errorJson.errorType||null,});},});});return response;}catch(error){console.error(error);return{error:true,status:error.status,message:error.message,errorType:error.errorType||null,};}}
function controlRatingVisibility(cookieName=""){const blocked=getCookie(cookieName);if(blocked)return;else{if(popup){let starBtn=root.querySelector("#star-btn");setTimeout(()=>{popup.classList.add("open");},delayMinutes*1000);closeBtn?.addEventListener("click",()=>{popup.classList.remove("open");});if(messageSuccess){iconImg.classList.add("d-none");}
if(starBtn){starBtn?.addEventListener("click",()=>{if(popup.classList.contains("open")){popup.classList.remove("open");}else{popup.classList.add("open");}});}}else{root.querySelector(".rating-section").style.display="block";if(closeRatingBtn){closeRatingBtn.addEventListener("click",()=>{root.closest("section").style.display="none";setCookie(`rating_${ratePosition}_block_until`,"1",firstDayOfNextMonthLocal());});}}}}
function updateTitle(root,rateTitle){let titleEl=root.querySelector(".umbraco-forms-field.title.richtext .umbraco-forms-field-wrapper > div");if(titleEl)titleEl.innerHTML=`<p>${rateTitle}</p>`;}
function changeStatusIcon(list,limit=5){if(list.length){list.forEach((radio)=>{radio.addEventListener("change",()=>{const val=parseInt(radio.value);updateIconByRating(val,limit);});});}}
function updateIconByRating(value,limit=5){if(!iconImg)return;if(value<limit){iconImg.src="/assets/customs/images/rate-sad-icon.png";}else{iconImg.src="/assets/customs/images/rate-smile-wow-icon.png";}}
function updateRatePosition(){const target=root.querySelector(`.rateposition input[type="radio"][value="${ratePosition}"]`);if(!target||target.disabled)return false;if(!target.checked){target.click();}else{target.dispatchEvent(new Event("click",{bubbles:true}));target.dispatchEvent(new Event("change",{bubbles:true}));}
return true;}
function updateRepaymentTerm(){const target=root.querySelector(`.repaymentterm .radiobuttonlist input[type="radio"][value="true"]`);if(!target||target.disabled)return false;if(!target.checked){target.click();const repaymentTitleEl=root.querySelector(".umbraco-forms-field.npstitle .umbraco-forms-field-wrapper > div");if(repaymentTitleEl){const titleEl=root.querySelector(".umbraco-forms-field.title.richtext .umbraco-forms-field-wrapper > div");if(titleEl){const clone=repaymentTitleEl.cloneNode(true);titleEl.replaceChildren(...clone.childNodes);}}}else{target.dispatchEvent(new Event("click",{bubbles:true}));target.dispatchEvent(new Event("change",{bubbles:true}));}
return true;}
function firstDayOfNextMonthLocal(){const now=new Date();return new Date(now.getFullYear(),now.getMonth()+1,1,0,0,0);}
function setCookie(name,value,expiresDate){let cookie=encodeURIComponent(name)+"="+
encodeURIComponent(value)+"; path=/; SameSite=Lax";if(expiresDate)cookie+="; expires="+expiresDate.toUTCString();if(location.protocol==="https:")cookie+="; Secure";document.cookie=cookie;}
function getCookie(name){const prefix=encodeURIComponent(name)+"=";const found=document.cookie.split("; ").find((x)=>x.startsWith(prefix));return found?decodeURIComponent(found.substring(prefix.length)):null;}}}
document.addEventListener("DOMContentLoaded",function(){const candidates=document.querySelectorAll(".umbraco-forms-form form, form.umbraco-forms-form");const ratingForms=Array.from(candidates).filter((f)=>{const scope=f.closest(".rating-root")||f;const hasStars=scope.querySelector(".radiobuttonlist input[type='radio']");const hasRatePos=scope.querySelector(".umbraco-forms-field.rateposition");return hasStars&&hasRatePos;});ratingForms.forEach((form)=>{initRatingForm(form);});});;;
class CustomSelect{constructor(element){this.element=element;this.selectBtn=element.querySelector('#customSelectBtn');this.dropdown=element.querySelector('#customDropdown');this.placeholder=element.querySelector('.select-placeholder');this.placeholderText=this.placeholder.textContent;this.items=element.querySelectorAll('.custom-dropdown-item');this.selectedValue=null;this.init();}
init(){this.selectBtn.addEventListener('click',(e)=>{e.preventDefault();e.stopPropagation();this.toggle();});this.items.forEach((item,index)=>{item.addEventListener('click',(e)=>{e.preventDefault();this.selectOption(item);});});document.addEventListener('click',(e)=>{if(!this.element.contains(e.target)){this.close();}});}
toggle(){if(this.isOpen){this.close();}else{this.open();}}
open(){this.selectBtn.classList.add('show');this.dropdown.classList.add('show');}
close(){this.selectBtn.classList.remove('show');this.dropdown.classList.remove('show');}
selectOption(item){const value=item.dataset.value;const text=item.querySelector('span').textContent;this.items.forEach(i=>i.classList.remove('active'));item.classList.add('active');this.placeholder.textContent=text;this.placeholder.classList.add('selected-text');this.selectedValue=value;this.close();this.element.dispatchEvent(new CustomEvent('customSelect:change',{detail:{value,text}}));}
getValue(){return this.selectedValue;}
setValue(value){const item=this.element.querySelector(`[data-value="${value}"]`);if(item){this.selectOption(item);}}
reset(){this.items.forEach(item=>item.classList.remove('active'));this.placeholder.textContent=this.placeholderText;this.placeholder.classList.remove('selected-text');this.selectedValue=null;this.element.dispatchEvent(new CustomEvent('customSelect:change',{detail:{value:null,text:null}}));}};;
