document.addEventListener("DOMContentLoaded",function(){const compareModelEl=document.querySelector("#compare-card-modal");const compareBtnElList=document.querySelectorAll(".card-compare .compare-btn");CheckItemInArray();if(compareBtnElList.length&&compareModelEl){compareBtnElList.forEach((compareBtnEl)=>{compareBtnEl.addEventListener("click",function(){if(!compareModelEl.classList.contains("show")){compareModelEl.classList.add("show");}
if(!this.classList.contains("active")){this.classList.add("active");const cardCompareEl=this.closest(".card-compare");AddItem(cardCompareEl);}else{this.classList.remove("active");const cardCompareEl=this.closest(".card-compare");RemoveItem(cardCompareEl);}});});}
function AddItem(cardCompareEl){let storedData=localStorage.getItem("compareArray");let compareArray=Boolean(storedData)?JSON.parse(storedData):[];if(Boolean(cardCompareEl)){const id=cardCompareEl.getAttribute("data-id");const name=cardCompareEl.getAttribute("data-name");const image=cardCompareEl.getAttribute("data-img");let item={id:id,name:name,image:image,};if(!compareArray?.find((i)=>i.id===item.id)){compareArray.push(item);}}
UpdateNumberItem(compareArray);}
function CheckItemInArray(){let storedData=localStorage.getItem("compareArray");let compareArray=Boolean(storedData)?JSON.parse(storedData):[];if(Boolean(compareBtnElList.length)){compareBtnElList?.forEach((ar)=>{let id=ar.closest(".card-compare").getAttribute("data-id");Boolean(compareArray?.length)&&compareArray?.find((i)=>i.id===id)?ar.classList.add("active"):ar.classList.remove("active");});}}
function RemoveItem(cardCompareEl){let storedData=localStorage.getItem("compareArray");let compareArray=Boolean(storedData)?JSON.parse(storedData):[];if(Boolean(cardCompareEl)&&Boolean(compareArray.length)){const id=cardCompareEl.getAttribute("data-id");let delItem=compareArray.findIndex((item)=>item.id===id);delItem!==-1&&compareArray.splice(delItem,1);}
UpdateNumberItem(compareArray);}
function UpdateNumberItem(arr){localStorage.setItem("compareArray",JSON.stringify(arr));if(typeof window.UpdateItem==="function"){window.UpdateItem(arr);}}
window.CheckItemInArray=CheckItemInArray;});;;
$(document).ready(function(){function initializeSlider(sliderClass,paginationClass){const sliderEl=$(sliderClass).find(".credit-slider-list");const carouselIndicatorSpans=$(sliderClass).find(".slick-dots li button span");const paginationTabs=$(paginationClass).find("ul .nav-cre-link");let intervalID;if($(sliderEl).length){$(sliderEl).slick({arrows:false,lazyLoad:"ondemand",dots:false,appendDots:$(sliderEl).find(".indicator"),appendArrows:$(sliderEl).find(".indicator"),prevArrow:`<button type='button' class='slick-prev pull-left'><i class="ti ti-chevron-left"></i></button>`,nextArrow:`<button type='button' class='slick-next pull-right'><i class="ti ti-chevron-right"></i></button>`,adaptiveHeight:false,autoplay:false,});fillCarouselHeroIndicator(0,sliderEl);sliderEl.on("afterChange",function(event,slick,currentSlide){fillCarouselHeroIndicator(currentSlide,sliderEl);syncPagination(currentSlide,paginationTabs);});$(sliderClass).find(".slick-next").on("click",function(){sliderEl.slick("slickNext");});$(sliderClass).find(".slick-prev").on("click",function(){sliderEl.slick("slickPrev");});$(sliderClass).find(".slick-dots li").on("click",function(){sliderEl.slick("slickGoTo",$(this).index());});paginationTabs.on("click",function(){const index=$(this).data("index");paginationTabs.removeClass("active");$(this).addClass("active");sliderEl.slick("slickGoTo",index);});function fillCarouselHeroIndicator(index,slider){let progress=0;if(carouselIndicatorSpans.length){carouselIndicatorSpans.css("width","0");if(index>0){for(let z=0;z<index;z++){carouselIndicatorSpans.eq(z).css("width","100%");}}
clearInterval(intervalID);slider.slick("slickPause");intervalID=setInterval(function(){progress++;carouselIndicatorSpans.eq(index).css("width",`${progress}%`);if(progress>=100){slider.slick("slickNext");}},50);}}
function syncPagination(currentSlide,tabs){tabs.removeClass("active");tabs.eq(currentSlide).addClass("active");}}}
function initializeSliderCard(){const tabPaneList=$(`#credit-promotion > .tab-pane`);tabPaneList.each(function(){const dataIndex=$(this).attr("data-index");const cardNewClass=`.tab-pane[data-index='${dataIndex}'] .credit-promotion-list .credit-card-new`;const cardPaginationClass=`.tab-pane[data-index='${dataIndex}'] .pagination.card-new`;const cardCustomerClass=`.tab-pane[data-index='${dataIndex}'] .credit-promotion-list .credit-card-customer`;const cardCustomerPaginationClass=`.tab-pane[data-index='${dataIndex}'] .pagination.card-customer`;initializeSlider(cardNewClass,cardPaginationClass);initializeSlider(cardCustomerClass,cardCustomerPaginationClass);});}
initializeSlider("#all-list .credit-all-new",".pagination.all-new");initializeSlider("#all-list .credit-all-customer",".pagination.all-customer");initializeSliderCard();});;;
document.addEventListener("DOMContentLoaded",function(){const header=document.querySelector(".header-compare-card .slider-compare");const contentList=document.querySelectorAll(".content-compare-card .slider-compare");const btnPrev=document.querySelector(".btn-pre");const btnNext=document.querySelector(".btn-next");const btnAddCard=document.querySelectorAll(".btn-add-card");const scrollAmount=100;let isSyncingScroll=false;let isScrollingByButton=false;let syncTimeout;function syncScroll(source){if(isScrollingByButton||isSyncingScroll)return;clearTimeout(syncTimeout);isSyncingScroll=true;syncTimeout=setTimeout(()=>{requestAnimationFrame(()=>{[header,...contentList].forEach((target)=>{if(target!==source){target.scrollTo({left:source.scrollLeft,behavior:"smooth",});}});isSyncingScroll=false;});},50);UpdateStateButton();}
function attachScrollSync(element){element?.addEventListener("scroll",()=>syncScroll(element));}
attachScrollSync(header);function scrollAll(direction){isScrollingByButton=true;const scrollValue=direction==="left"?-scrollAmount:scrollAmount;const scrollPromises=[header,...contentList].map((el)=>{return new Promise((resolve)=>{el.scrollBy({left:scrollValue,behavior:"smooth"});setTimeout(resolve,100);});});Promise.all(scrollPromises).then(()=>{isScrollingByButton=false;UpdateStateButton();});}
Boolean(btnPrev)&&btnPrev.addEventListener("click",()=>scrollAll("left"));Boolean(btnNext)&&btnNext.addEventListener("click",()=>scrollAll("right"));function UpdateStateButton(){const firstElement=header;const maxScrollLeft=firstElement.scrollWidth-firstElement.clientWidth;if(firstElement.scrollLeft<=70){btnPrev.classList.add("disabled");}else{btnPrev.classList.remove("disabled");}
if(firstElement.scrollLeft>=maxScrollLeft-50){btnNext.classList.add("disabled");}else{btnNext.classList.remove("disabled");}}
const modalCardEl=document.querySelector("#modal-card-list");if(Boolean(btnAddCard.length)&&Boolean(modalCardEl)){btnAddCard.forEach((btn)=>{btn.addEventListener("click",()=>{if(!modalCardEl.classList.contains("show")){modalCardEl.classList.add("show");}});});}
const btnRemove=document.querySelectorAll(".compare-table .close-btn");let isProcessing=false;if(Boolean(btnRemove.length)){btnRemove.forEach((btn)=>{btn.addEventListener("click",()=>{if(isProcessing)return;isProcessing=true;btnRemove.forEach((b)=>(b.disabled=true));let url=new URL(window.location.href);let urlParams=new URLSearchParams(url.search);const itemEl=btn.closest(".compare-card-image");const card_Id=itemEl.getAttribute("data-id");urlParams.delete("card_Id",card_Id);window.location.replace(url.origin+url.pathname+"?"+urlParams.toString());setTimeout(()=>{isProcessing=false;btnRemove.forEach((b)=>(b.disabled=false));},2000);});});}});;;
document.addEventListener("DOMContentLoaded",function(){const compareModelEl=document.querySelector("#compare-card-modal");const numberItemEl=document.querySelector("#compare-card-modal .compare-title .number-item");const closeBtnEl=document.querySelector("#compare-card-modal .close-btn");const stopBtnEl=document.querySelector("#compare-card-modal .stop-btn");const compareListEl=document.querySelector(".compare-wrapper .compare-list");let storedData=localStorage.getItem("compareArray");const compareArray=storedData?JSON.parse(storedData):[];const compareItemNull=`<div class="compare-item null-item position-relative flex-1 gap8 d-flex flex-column justify-content-center align-items-center p8 radius8 h-100"></div>`;if(compareListEl){compareListEl.innerHTML+=compareItemNull;}
if(Boolean(closeBtnEl)&&Boolean(compareModelEl)){closeBtnEl.addEventListener("click",function(){compareModelEl.classList.remove("show");localStorage.clear("compareArray");if(typeof window.CheckItemInArray==="function"){window.CheckItemInArray(JSON.parse(localStorage.getItem("compareArray")));}});}
if(Boolean(stopBtnEl)&&Boolean(compareModelEl)){stopBtnEl.addEventListener("click",function(){compareModelEl.classList.remove("show");localStorage.clear("compareArray");if(typeof window.CheckItemInArray==="function"){window.CheckItemInArray(JSON.parse(localStorage.getItem("compareArray")));}});}
if(Boolean(compareArray)){let storedData=localStorage.getItem("compareArray");let compareArray=Boolean(storedData)?JSON.parse(storedData):[];ShowModal(compareArray);UpdateItem(compareArray);}
window.addEventListener("storage",function(event){if(event.key==="compareArray"){compareArray=JSON.parse(event.newValue)||[];UpdateItem(compareArray);UpdateCompareLink();}});function UpdateItem(arr){if(arr?.length>0&&arr?.length<=3){numberItemEl.textContent=arr?.length;let itemsHTML=RenderItem(arr);let emptyItemsCount=3-arr.length;let emptyItemsHTML=Array(emptyItemsCount)?.fill(compareItemNull)?.join("");compareListEl.innerHTML=itemsHTML+emptyItemsHTML;}else if(arr?.length>3){numberItemEl.textContent=3;let itemsHTML=RenderItem(arr);compareListEl.innerHTML=itemsHTML;RemoveAttributeOnclickToEventJS();}else{numberItemEl.textContent=0;let emptyItemsHTML=Array(3)?.fill(compareItemNull)?.join("");compareListEl.innerHTML=emptyItemsHTML;compareModelEl.classList.remove("show");}}
function RenderItem(arr){let itemsHTML=arr?.map((item)=>`<div class="compare-item position-relative flex-1 gap8 d-flex flex-column lg:flex-row justify-content-center justify-content-lg-start align-items-center p8 radius8 h-100" data-name="${item.name}" data-id="${item.id}" data-img="${item.image}">
                  <img loading="lazy" src="${item.image}" alt="card-img" class="item-image radius4 overflow-hidden flex-shrink-0 lazyload">
                    <div class="card-name lh150 fs-12 fw-700 style-normal text-gray-8 text-uppercase" style="overflow: hidden;text-overflow: ellipsis;text-wrap: nowrap;">${item.name}</div>
                    <div class="p4 d-flex align-items-center fs-16 bg-gray-9 radius1000 remove-icon" style="position: absolute; right:-6.485px; top: -6px; cursor: pointer;" onclick="window.RemoveIconEvent(this)">
                      <i class="ti ti-x"></i>
                    </div>
              </div>`)?.join("");return itemsHTML;}
function RemoveIconEvent(removeIconEl){const cardItem=removeIconEl.closest(".compare-item");const id=cardItem.getAttribute("data-id");let storedData=localStorage.getItem("compareArray");const arr=Boolean(storedData)?JSON.parse(storedData):[];let delItem=arr.findIndex((item)=>item.id===id);if(delItem!==-1){arr?.splice(delItem,1);localStorage.setItem("compareArray",JSON.stringify(arr));UpdateItem(arr);if(typeof window.CheckItemInArray==="function"){window.CheckItemInArray();}}}
function ShowModal(arr){if(arr.length>0&&!compareModelEl.classList.contains("show")){compareModelEl.classList.add("show");}}
const listLinks=document.querySelectorAll("#compare-card-modal .compare-btn-link");if(Boolean(listLinks.length)){listLinks.forEach((item)=>{item.addEventListener("click",()=>{let url=new URL(window.location.href);url.searchParams.delete("card_Id");const arr=JSON.parse(localStorage.getItem("compareArray"));const linkUrl=item.getAttribute("data-url");if(Boolean(arr.length)){arr.forEach((card)=>url.searchParams.append("card_Id",card?.id));}
window.location.replace(url.origin+linkUrl+url.search.toString());localStorage.clear("compareArray");});});}
window.UpdateItem=UpdateItem;window.RemoveIconEvent=RemoveIconEvent;});;;
document.addEventListener("DOMContentLoaded",function(){const modalCardEl=document.querySelector("#modal-card-list");const btnCloseModal=document.querySelector("#modal-card-list .btn-close-modal");const btnWrapperModal=document.querySelector("#modal-card-list .modal-wrapper");const cardAddList=document.querySelectorAll("#modal-card-list .card-add-item");if(Boolean(btnCloseModal)&&Boolean(modalCardEl)){btnCloseModal.addEventListener("click",()=>{modalCardEl.classList.remove("show");});}
if(Boolean(btnWrapperModal)&&Boolean(modalCardEl)){btnWrapperModal.addEventListener("click",()=>{modalCardEl.classList.remove("show");});}
if(Boolean(cardAddList.length)){cardAddList.forEach((item)=>{item.addEventListener("click",()=>{if(Boolean(item.classList.contains("active"))){item.classList.remove("active");}else{item.classList.add("active");}
DisableList(cardAddList);});});}
function DisableList(cardAddList){let cardAddListActive=document.querySelectorAll("#modal-card-list .card-add-item.active");if(cardAddListActive?.length>=3){cardAddList?.forEach((item)=>{if(!item.classList.contains("active")){item.classList.add("un-active");}});}else{cardAddList?.forEach((item)=>{if(!item.classList.contains("active")){item.classList.remove("un-active");}});}}
const btnCompareEl=document.querySelector("#modal-card-list .compare-now");if(btnCompareEl){btnCompareEl.addEventListener("click",()=>{let url=new URL(window.location.href);url.searchParams.delete("card_Id");let cardAddListActive=Array.from(document.querySelectorAll("#modal-card-list .card-add-item.active"));let newParams=[];if(cardAddListActive.length){cardAddListActive.forEach((card)=>{let cardId=card.getAttribute("data-id");newParams.push(`card_Id=${cardId}`);});}
let newUrl=url.origin+
url.pathname+
(newParams.length?"?"+newParams.join("&"):"");window.location.replace(newUrl);});}});;;
